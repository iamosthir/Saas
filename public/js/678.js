/*! For license information please see 678.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[678],{4216:(t,a,e)=>{e.d(a,{Z:()=>o});var n=e(1519),r=e.n(n)()((function(t){return t[1]}));r.push([t.id,".pos-container[data-v-8baf0f80]{background:#f5f7fa;display:flex;flex-direction:column;height:100vh;overflow:hidden}.offline-banner[data-v-8baf0f80]{background:#ff9800;color:#fff;font-size:14px;padding:8px;text-align:center}.pos-topbar[data-v-8baf0f80]{align-items:center;background:#fff;border-bottom:1px solid #e0e0e0;display:flex;gap:20px;justify-content:space-between;padding:10px 20px}.pos-topbar h4[data-v-8baf0f80]{font-size:18px;margin:0}.cart-tabs[data-v-8baf0f80]{gap:5px}.cart-tab[data-v-8baf0f80],.cart-tabs[data-v-8baf0f80]{align-items:center;display:flex}.cart-tab[data-v-8baf0f80]{background:#f0f0f0;border-radius:20px;cursor:pointer;gap:8px;padding:8px 16px;transition:all .2s}.cart-tab.active[data-v-8baf0f80]{background:#2196f3;color:#fff}.cart-tab .item-count[data-v-8baf0f80]{background:rgba(0,0,0,.1);border-radius:10px;font-size:12px;padding:2px 8px}.cart-tab .close-cart[data-v-8baf0f80]{background:none;border:none;cursor:pointer;opacity:.6;padding:2px}.new-cart-btn[data-v-8baf0f80]{align-items:center;background:none;border:2px dashed #ccc;border-radius:50%;cursor:pointer;display:flex;height:36px;justify-content:center;width:36px}.pos-topbar-right[data-v-8baf0f80]{display:flex;gap:10px}.pos-topbar-right .badge[data-v-8baf0f80]{background:#f44336;border-radius:10px;color:#fff;font-size:10px;margin-left:5px;padding:2px 6px}.pos-main[data-v-8baf0f80],.pos-products[data-v-8baf0f80]{display:flex;flex:1;overflow:hidden}.pos-products[data-v-8baf0f80]{flex-direction:column;padding:20px}.search-section[data-v-8baf0f80]{margin-bottom:20px}.search-input-wrapper[data-v-8baf0f80]{align-items:center;display:flex;position:relative}.search-input-wrapper i[data-v-8baf0f80]{color:#888;left:15px;position:absolute}.search-input[data-v-8baf0f80]{border:2px solid #e0e0e0;border-radius:10px;font-size:16px;padding:15px 45px;transition:border-color .2s;width:100%}.search-input[data-v-8baf0f80]:focus{border-color:#2196f3;outline:none}.clear-search[data-v-8baf0f80]{background:none;border:none;color:#888;cursor:pointer;position:absolute;right:15px}.product-grid[data-v-8baf0f80]{align-content:start;display:grid;flex:1;gap:20px;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));overflow-y:auto;padding-right:10px}.empty-state[data-v-8baf0f80],.loading-state[data-v-8baf0f80]{color:#888;grid-column:1/-1;padding:40px;text-align:center}.empty-state i[data-v-8baf0f80]{font-size:48px;margin-bottom:10px;opacity:.5}.product-card[data-v-8baf0f80]{background:#fff;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.08);cursor:pointer;display:flex;flex-direction:column;height:100%;overflow:hidden;transition:all .3s ease}.product-card[data-v-8baf0f80]:hover{box-shadow:0 8px 24px rgba(33,150,243,.2);transform:translateY(-4px)}.product-image[data-v-8baf0f80]{align-items:center;background:linear-gradient(135deg,#f5f7fa,#e8ecf1);display:flex;height:160px;justify-content:center;overflow:hidden;position:relative;width:100%}.product-image img[data-v-8baf0f80]{height:100%;-o-object-fit:cover;object-fit:cover;transition:transform .3s ease;width:100%}.product-card:hover .product-image img[data-v-8baf0f80]{transform:scale(1.05)}.product-image i[data-v-8baf0f80]{color:#cbd5e0;font-size:48px}.product-info[data-v-8baf0f80]{display:flex;flex:1;flex-direction:column;gap:8px;padding:15px}.product-name[data-v-8baf0f80]{-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical;color:#2d3748;display:-webkit-box;font-size:14px;font-weight:600;line-height:1.4;min-height:40px;overflow:hidden}.product-price[data-v-8baf0f80]{color:#2196f3;font-size:18px;font-weight:700;margin-top:auto}.product-stock[data-v-8baf0f80]{align-items:center;color:#4caf50;display:flex;font-size:13px;font-weight:600;gap:6px}.product-stock i[data-v-8baf0f80]{font-size:14px}.product-stock.low-stock[data-v-8baf0f80]{color:#f44336}.pos-cart[data-v-8baf0f80]{background:#fff;border-left:1px solid #e0e0e0;display:flex;flex-direction:column;width:400px}.customer-section[data-v-8baf0f80]{border-bottom:1px solid #e0e0e0;padding:15px}.selected-customer[data-v-8baf0f80]{align-items:center;background:#e3f2fd;border-radius:8px;display:flex;gap:10px;padding:10px 15px}.selected-customer .btn-clear[data-v-8baf0f80]{background:none;border:none;color:#888;cursor:pointer;margin-left:auto}.select-customer-btn[data-v-8baf0f80]{background:none;border:2px dashed #ccc;border-radius:8px;color:#666;cursor:pointer;padding:12px;transition:all .2s;width:100%}.select-customer-btn[data-v-8baf0f80]:hover{border-color:#2196f3;color:#2196f3}.cart-items[data-v-8baf0f80]{flex:1;overflow-y:auto;padding:15px}.empty-cart[data-v-8baf0f80]{color:#888;padding:40px 20px;text-align:center}.empty-cart i[data-v-8baf0f80]{font-size:48px;margin-bottom:10px;opacity:.3}.cart-item[data-v-8baf0f80]{align-items:center;background:#f9f9f9;border-radius:8px;cursor:pointer;display:grid;gap:10px;grid-template-columns:1fr auto auto auto;margin-bottom:10px;padding:12px;transition:all .2s}.cart-item.selected[data-v-8baf0f80]{background:#e3f2fd;border:1px solid #2196f3}.item-name[data-v-8baf0f80]{font-size:14px;font-weight:500}.item-name .variation[data-v-8baf0f80]{color:#888;font-size:12px;font-weight:400}.item-price[data-v-8baf0f80]{color:#666;font-size:12px}.item-controls[data-v-8baf0f80]{align-items:center;display:flex;gap:5px}.qty-btn[data-v-8baf0f80]{background:#fff;cursor:pointer;font-size:16px;height:28px;width:28px}.qty-btn[data-v-8baf0f80],.qty-input[data-v-8baf0f80]{border:1px solid #ddd;border-radius:4px}.qty-input[data-v-8baf0f80]{padding:4px;text-align:center;width:40px}.item-total[data-v-8baf0f80]{font-weight:600;min-width:70px;text-align:right}.item-actions[data-v-8baf0f80]{display:flex;gap:5px}.btn-discount[data-v-8baf0f80],.btn-remove[data-v-8baf0f80]{border:none;border-radius:4px;cursor:pointer;font-size:12px;height:28px;width:28px}.btn-discount[data-v-8baf0f80]{background:#fff3e0;color:#ff9800}.btn-remove[data-v-8baf0f80]{background:#ffebee;color:#f44336}.cart-summary[data-v-8baf0f80]{background:#fafafa;border-top:1px solid #e0e0e0;padding:15px}.summary-row[data-v-8baf0f80]{display:flex;justify-content:space-between;padding:8px 0}.summary-row.discount[data-v-8baf0f80]{color:#4caf50}.summary-row.tax[data-v-8baf0f80]{color:#888;font-size:14px}.summary-row.total[data-v-8baf0f80]{border-top:2px solid #e0e0e0;font-size:20px;font-weight:700;margin-top:10px;padding-top:15px}.add-discount-btn[data-v-8baf0f80]{color:#2196f3;font-size:14px}.add-discount-btn[data-v-8baf0f80],.btn-edit-discount[data-v-8baf0f80]{background:none;border:none;cursor:pointer}.btn-edit-discount[data-v-8baf0f80]{color:inherit;padding:0 5px}.cart-actions[data-v-8baf0f80]{border-top:1px solid #e0e0e0;display:flex;gap:10px;padding:15px}.btn-park[data-v-8baf0f80]{flex:1}.btn-pay[data-v-8baf0f80]{flex:2;font-size:18px;padding:15px}.modal-overlay[data-v-8baf0f80]{align-items:center;background:rgba(0,0,0,.5);bottom:0;display:flex;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:1000}.modal-content[data-v-8baf0f80]{background:#fff;border-radius:12px;display:flex;flex-direction:column;max-height:90vh;max-width:500px;overflow:hidden;width:90%}.modal-header[data-v-8baf0f80]{align-items:center;border-bottom:1px solid #e0e0e0;display:flex;justify-content:space-between;padding:15px 20px}.modal-header h5[data-v-8baf0f80]{margin:0}.close-btn[data-v-8baf0f80]{background:none;border:none;color:#888;cursor:pointer;font-size:20px}.modal-body[data-v-8baf0f80]{overflow-y:auto;padding:20px}.variations-grid[data-v-8baf0f80]{display:grid;gap:10px;grid-template-columns:repeat(auto-fill,minmax(120px,1fr))}.variation-card[data-v-8baf0f80]{border:2px solid #e0e0e0;border-radius:8px;cursor:pointer;padding:15px;text-align:center;transition:all .2s}.variation-card[data-v-8baf0f80]:hover{border-color:#2196f3}.variation-card.out-of-stock[data-v-8baf0f80]{cursor:not-allowed;opacity:.5}.variation-name[data-v-8baf0f80]{font-weight:600;margin-bottom:5px}.variation-price[data-v-8baf0f80]{color:#2196f3;font-weight:700}.variation-stock[data-v-8baf0f80]{color:#888;font-size:12px}.customer-search[data-v-8baf0f80]{margin-bottom:15px}.customer-list[data-v-8baf0f80]{max-height:200px;overflow-y:auto}.customer-item[data-v-8baf0f80]{border:1px solid #e0e0e0;border-radius:8px;cursor:pointer;margin-bottom:8px;padding:12px;transition:all .2s}.customer-item[data-v-8baf0f80]:hover{background:#f5f5f5}.customer-name[data-v-8baf0f80]{font-weight:600}.customer-phone[data-v-8baf0f80]{color:#888;font-size:14px}.create-customer-form[data-v-8baf0f80]{border-top:1px solid #e0e0e0;margin-top:20px;padding-top:20px}.form-group[data-v-8baf0f80]{margin-bottom:10px}.discount-type-toggle[data-v-8baf0f80]{display:flex;gap:10px;margin-bottom:20px}.discount-type-toggle button[data-v-8baf0f80]{background:#fff;border:2px solid #e0e0e0;border-radius:8px;cursor:pointer;flex:1;padding:12px;transition:all .2s}.discount-type-toggle button.active[data-v-8baf0f80]{background:#e3f2fd;border-color:#2196f3}.discount-input[data-v-8baf0f80]{margin-bottom:20px}.discount-actions[data-v-8baf0f80]{display:flex;gap:10px;justify-content:flex-end}.payment-modal[data-v-8baf0f80]{max-width:600px}.payment-summary[data-v-8baf0f80]{background:#f5f5f5;border-radius:8px;margin-bottom:20px;padding:20px}.remaining[data-v-8baf0f80],.total-due[data-v-8baf0f80]{display:flex;font-size:18px;justify-content:space-between;margin-bottom:10px}.remaining .amount[data-v-8baf0f80],.total-due .amount[data-v-8baf0f80]{font-weight:700}.change[data-v-8baf0f80],.paid-so-far[data-v-8baf0f80]{color:#666;display:flex;font-size:14px;justify-content:space-between}.change .amount[data-v-8baf0f80]{font-weight:600}.payment-methods[data-v-8baf0f80]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px}.payment-method-btn[data-v-8baf0f80]{background:#fff;border:2px solid #e0e0e0;border-radius:8px;cursor:pointer;flex:1;min-width:100px;padding:15px;text-align:center;transition:all .2s}.payment-method-btn.active[data-v-8baf0f80]{background:#e3f2fd;border-color:#2196f3}.payment-method-btn i[data-v-8baf0f80]{display:block;font-size:24px;margin-bottom:5px}.payment-input[data-v-8baf0f80]{margin-bottom:15px}.payment-input label[data-v-8baf0f80]{display:block;font-weight:500;margin-bottom:5px}.amount-input[data-v-8baf0f80]{font-size:24px;padding:15px;text-align:center}.quick-amounts[data-v-8baf0f80]{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px}.quick-amount-btn[data-v-8baf0f80]{background:#fff;border:1px solid #e0e0e0;border-radius:20px;cursor:pointer;padding:10px 20px;transition:all .2s}.quick-amount-btn[data-v-8baf0f80]:hover{background:#f5f5f5}.payments-list[data-v-8baf0f80],.reference-input[data-v-8baf0f80]{margin-bottom:20px}.payments-list[data-v-8baf0f80]{background:#f9f9f9;border-radius:8px;padding:15px}.payments-list h6[data-v-8baf0f80]{margin-bottom:10px}.payment-item[data-v-8baf0f80]{align-items:center;border-bottom:1px solid #e0e0e0;display:flex;justify-content:space-between;padding:8px 0}.payment-item[data-v-8baf0f80]:last-child{border-bottom:none}.btn-remove-payment[data-v-8baf0f80]{background:none;border:none;color:#f44336;cursor:pointer}.payment-actions[data-v-8baf0f80]{display:flex;gap:10px}.btn-complete[data-v-8baf0f80]{flex:1;font-size:16px;padding:15px}.parked-sales-list[data-v-8baf0f80]{max-height:400px;overflow-y:auto}.parked-sale-item[data-v-8baf0f80]{align-items:center;border:1px solid #e0e0e0;border-radius:8px;cursor:pointer;display:flex;gap:15px;margin-bottom:10px;padding:15px;transition:all .2s}.parked-sale-item[data-v-8baf0f80]:hover{background:#f5f5f5}.sale-info[data-v-8baf0f80]{flex:1}.sale-number[data-v-8baf0f80]{font-weight:600}.sale-name[data-v-8baf0f80]{color:#666;font-size:14px}.sale-customer[data-v-8baf0f80]{color:#888;font-size:12px}.sale-details[data-v-8baf0f80]{text-align:right}.items-count[data-v-8baf0f80]{color:#888;font-size:12px}.sale-total[data-v-8baf0f80]{color:#2196f3;font-weight:700}.btn-delete-parked[data-v-8baf0f80]{background:none;border:none;color:#f44336;cursor:pointer;padding:10px}.receipt-modal[data-v-8baf0f80]{max-width:400px;text-align:center}.success-icon[data-v-8baf0f80]{color:#4caf50;font-size:64px}.receipt-info[data-v-8baf0f80],.success-icon[data-v-8baf0f80]{margin-bottom:20px}.receipt-info .total[data-v-8baf0f80]{font-size:32px;font-weight:700}.receipt-info .change[data-v-8baf0f80]{color:#4caf50;font-size:18px}.receipt-actions[data-v-8baf0f80]{display:flex;gap:10px}.receipt-actions button[data-v-8baf0f80]{flex:1}@media (max-width:768px){.pos-topbar[data-v-8baf0f80]{flex-wrap:wrap;gap:10px;padding:10px}.pos-topbar h4[data-v-8baf0f80]{font-size:16px}.pos-topbar-left[data-v-8baf0f80]{flex:1;min-width:150px}.pos-topbar-center[data-v-8baf0f80]{order:3;width:100%}.cart-tabs[data-v-8baf0f80]{overflow-x:auto;padding-bottom:5px;width:100%}.cart-tab[data-v-8baf0f80]{font-size:14px;padding:6px 12px}.pos-topbar-right[data-v-8baf0f80]{gap:5px}.pos-topbar-right .btn[data-v-8baf0f80]{font-size:12px;padding:6px 10px}.pos-main[data-v-8baf0f80]{flex-direction:column}.pos-products[data-v-8baf0f80]{height:50vh;padding:10px}.pos-cart[data-v-8baf0f80]{border-left:none;border-top:2px solid #e0e0e0;height:50vh;width:100%}.product-grid[data-v-8baf0f80]{gap:12px;grid-template-columns:repeat(auto-fill,minmax(140px,1fr))}.product-image[data-v-8baf0f80]{height:120px}.product-info[data-v-8baf0f80]{padding:12px}.product-name[data-v-8baf0f80]{font-size:13px;min-height:36px}.product-price[data-v-8baf0f80]{font-size:16px}.product-stock[data-v-8baf0f80]{font-size:12px}.cart-item[data-v-8baf0f80],.cart-items[data-v-8baf0f80]{padding:10px}.cart-item[data-v-8baf0f80]{gap:8px;grid-template-columns:1fr auto;grid-template-rows:auto auto}.item-info[data-v-8baf0f80]{grid-column:1/2;grid-row:1/2}.item-controls[data-v-8baf0f80]{grid-column:1/2;grid-row:2/3}.item-total[data-v-8baf0f80]{grid-column:2/3;grid-row:1/2}.item-actions[data-v-8baf0f80]{grid-column:2/3;grid-row:2/3;justify-content:flex-end}.cart-summary[data-v-8baf0f80]{padding:10px}.summary-row.total[data-v-8baf0f80]{font-size:18px}.cart-actions[data-v-8baf0f80]{gap:8px;padding:10px}.btn-pay[data-v-8baf0f80]{font-size:16px;padding:12px}.modal-content[data-v-8baf0f80]{max-height:95vh;width:95%}.modal-body[data-v-8baf0f80]{padding:15px}.payment-modal[data-v-8baf0f80]{max-width:95%}.payment-method-btn[data-v-8baf0f80]{font-size:12px;min-width:80px;padding:12px 8px}.amount-input[data-v-8baf0f80],.payment-method-btn i[data-v-8baf0f80]{font-size:20px}.amount-input[data-v-8baf0f80]{padding:12px}.quick-amounts[data-v-8baf0f80]{gap:8px}.quick-amount-btn[data-v-8baf0f80]{font-size:14px;padding:8px 16px}.variations-grid[data-v-8baf0f80]{grid-template-columns:repeat(auto-fill,minmax(100px,1fr))}.variation-card[data-v-8baf0f80]{padding:12px}}@media (max-width:480px){.pos-topbar h4[data-v-8baf0f80]{font-size:14px}.pos-topbar h4 i[data-v-8baf0f80]{display:none}.cart-tab[data-v-8baf0f80]{font-size:12px;padding:5px 10px}.new-cart-btn[data-v-8baf0f80]{height:32px;width:32px}.pos-topbar-right .btn span[data-v-8baf0f80]{display:none}.product-grid[data-v-8baf0f80]{gap:10px;grid-template-columns:repeat(auto-fill,minmax(120px,1fr))}.product-image[data-v-8baf0f80]{height:100px}.product-image i[data-v-8baf0f80]{font-size:36px}.product-info[data-v-8baf0f80]{padding:10px}.product-name[data-v-8baf0f80]{font-size:12px;min-height:34px}.product-price[data-v-8baf0f80]{font-size:14px}.product-stock[data-v-8baf0f80]{font-size:11px}.search-input[data-v-8baf0f80]{font-size:14px;padding:12px 40px}.customer-section[data-v-8baf0f80]{padding:10px}.cart-item[data-v-8baf0f80]{padding:8px}.cart-item[data-v-8baf0f80],.item-name[data-v-8baf0f80]{font-size:13px}.item-name .variation[data-v-8baf0f80],.item-price[data-v-8baf0f80]{font-size:11px}.qty-btn[data-v-8baf0f80]{font-size:14px;height:26px;width:26px}.qty-input[data-v-8baf0f80]{font-size:14px;width:36px}.item-total[data-v-8baf0f80]{font-size:14px;min-width:60px}.btn-discount[data-v-8baf0f80],.btn-remove[data-v-8baf0f80]{font-size:11px;height:26px;width:26px}.summary-row[data-v-8baf0f80]{font-size:14px;padding:6px 0}.summary-row.total[data-v-8baf0f80]{font-size:16px}.cart-actions[data-v-8baf0f80]{gap:6px;padding:8px}.btn-park[data-v-8baf0f80]{font-size:13px;padding:10px 8px}.btn-pay[data-v-8baf0f80]{font-size:14px;padding:10px}.modal-content[data-v-8baf0f80]{border-radius:0;height:100vh;max-height:100vh;max-width:100%;width:100%}.modal-header[data-v-8baf0f80]{padding:12px 15px}.modal-header h5[data-v-8baf0f80]{font-size:16px}.payment-methods[data-v-8baf0f80]{gap:8px}.payment-method-btn[data-v-8baf0f80]{font-size:11px;min-width:70px;padding:10px 6px}.payment-method-btn i[data-v-8baf0f80]{font-size:18px}.payment-method-btn span[data-v-8baf0f80]{font-size:10px}.amount-input[data-v-8baf0f80]{font-size:18px;padding:10px}.quick-amount-btn[data-v-8baf0f80]{font-size:12px;padding:8px 12px}.btn-complete[data-v-8baf0f80]{font-size:14px;padding:12px}.variations-grid[data-v-8baf0f80]{grid-template-columns:repeat(2,1fr)}.variation-card[data-v-8baf0f80]{font-size:13px;padding:10px}.variation-name[data-v-8baf0f80]{font-size:13px}.variation-price[data-v-8baf0f80]{font-size:14px}.customer-item[data-v-8baf0f80]{padding:10px}.customer-name[data-v-8baf0f80]{font-size:14px}.customer-phone[data-v-8baf0f80]{font-size:12px}.receipt-info .total[data-v-8baf0f80]{font-size:24px}.receipt-info .change[data-v-8baf0f80]{font-size:16px}.success-icon[data-v-8baf0f80]{font-size:48px}.parked-sale-item[data-v-8baf0f80]{gap:10px;padding:12px}.sale-number[data-v-8baf0f80]{font-size:14px}.sale-name[data-v-8baf0f80]{font-size:12px}.sale-total[data-v-8baf0f80]{font-size:14px}}@media (max-width:768px) and (orientation:landscape){.pos-main[data-v-8baf0f80]{flex-direction:row}.pos-products[data-v-8baf0f80]{height:auto;width:60%}.pos-cart[data-v-8baf0f80]{border-left:2px solid #e0e0e0;border-top:none;height:auto;width:40%}}@media (max-height:500px){.pos-topbar[data-v-8baf0f80]{padding:5px 10px}.cart-tab[data-v-8baf0f80]{padding:4px 8px}.search-section[data-v-8baf0f80]{margin-bottom:10px}.search-input[data-v-8baf0f80]{padding:10px 40px}.product-image[data-v-8baf0f80]{height:40px}.cart-actions[data-v-8baf0f80]{padding:6px}.btn-pay[data-v-8baf0f80]{font-size:13px;padding:8px}}",""]);const o=r},8678:(t,a,e)=>{e.r(a),e.d(a,{default:()=>g});var n=e(9669),r=e.n(n);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),e.push.apply(e,n)}return e}function s(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?i(Object(e),!0).forEach((function(a){c(t,a,e[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))}))}return t}function c(t,a,e){return(a=function(t){var a=function(t,a){if("object"!==o(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,a||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(t)}(t,"string");return"symbol"===o(a)?a:String(a)}(a))in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}function d(){d=function(){return t};var t={},a=Object.prototype,e=a.hasOwnProperty,n=Object.defineProperty||function(t,a,e){t[a]=e.value},r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function l(t,a,e){return Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[a]}try{l({},"")}catch(t){l=function(t,a,e){return t[a]=e}}function u(t,a,e,r){var o=a&&a.prototype instanceof m?a:m,i=Object.create(o.prototype),s=new S(r||[]);return n(i,"_invoke",{value:w(t,e,s)}),i}function f(t,a,e){try{return{type:"normal",arg:t.call(a,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var p={};function m(){}function v(){}function h(){}var b={};l(b,i,(function(){return this}));var x=Object.getPrototypeOf,g=x&&x(x(I([])));g&&g!==a&&e.call(g,i)&&(b=g);var y=h.prototype=m.prototype=Object.create(b);function _(t){["next","throw","return"].forEach((function(a){l(t,a,(function(t){return this._invoke(a,t)}))}))}function C(t,a){function r(n,i,s,c){var d=f(t[n],t,i);if("throw"!==d.type){var l=d.arg,u=l.value;return u&&"object"==o(u)&&e.call(u,"__await")?a.resolve(u.__await).then((function(t){r("next",t,s,c)}),(function(t){r("throw",t,s,c)})):a.resolve(u).then((function(t){l.value=t,s(l)}),(function(t){return r("throw",t,s,c)}))}c(d.arg)}var i;n(this,"_invoke",{value:function(t,e){function n(){return new a((function(a,n){r(t,e,a,n)}))}return i=i?i.then(n,n):n()}})}function w(t,a,e){var n="suspendedStart";return function(r,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw o;return F()}for(e.method=r,e.arg=o;;){var i=e.delegate;if(i){var s=k(i,e);if(s){if(s===p)continue;return s}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var c=f(t,a,e);if("normal"===c.type){if(n=e.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(n="completed",e.method="throw",e.arg=c.arg)}}}function k(t,a){var e=a.method,n=t.iterator[e];if(void 0===n)return a.delegate=null,"throw"===e&&t.iterator.return&&(a.method="return",a.arg=void 0,k(t,a),"throw"===a.method)||"return"!==e&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+e+"' method")),p;var r=f(n,t.iterator,a.arg);if("throw"===r.type)return a.method="throw",a.arg=r.arg,a.delegate=null,p;var o=r.arg;return o?o.done?(a[t.resultName]=o.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=void 0),a.delegate=null,p):o:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,p)}function P(t){var a={tryLoc:t[0]};1 in t&&(a.catchLoc=t[1]),2 in t&&(a.finallyLoc=t[2],a.afterLoc=t[3]),this.tryEntries.push(a)}function z(t){var a=t.completion||{};a.type="normal",delete a.arg,t.completion=a}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function I(t){if(t){var a=t[i];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function a(){for(;++n<t.length;)if(e.call(t,n))return a.value=t[n],a.done=!1,a;return a.value=void 0,a.done=!0,a};return r.next=r}}return{next:F}}function F(){return{value:void 0,done:!0}}return v.prototype=h,n(y,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:v,configurable:!0}),v.displayName=l(h,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var a="function"==typeof t&&t.constructor;return!!a&&(a===v||"GeneratorFunction"===(a.displayName||a.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,l(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},_(C.prototype),l(C.prototype,s,(function(){return this})),t.AsyncIterator=C,t.async=function(a,e,n,r,o){void 0===o&&(o=Promise);var i=new C(u(a,e,n,r),o);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},_(y),l(y,c,"Generator"),l(y,i,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var a=Object(t),e=[];for(var n in a)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in a)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=I,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(z),!t)for(var a in this)"t"===a.charAt(0)&&e.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function n(e,n){return i.type="throw",i.arg=t,a.next=e,n&&(a.method="next",a.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=e.call(o,"catchLoc"),c=e.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,a){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&e.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=a&&a<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=a,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(i)},complete:function(t,a){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&a&&(this.next=a),p},finish:function(t){for(var a=this.tryEntries.length-1;a>=0;--a){var e=this.tryEntries[a];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),z(e),p}},catch:function(t){for(var a=this.tryEntries.length-1;a>=0;--a){var e=this.tryEntries[a];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var r=n.arg;z(e)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,a,e){return this.delegate={iterator:I(t),resultName:a,nextLoc:e},"next"===this.method&&(this.arg=void 0),p}},t}function l(t,a,e,n,r,o,i){try{var s=t[o](i),c=s.value}catch(t){return void e(t)}s.done?a(c):Promise.resolve(c).then(n,r)}function u(t){return function(){var a=this,e=arguments;return new Promise((function(n,r){var o=t.apply(a,e);function i(t){l(o,n,r,i,s,"next",t)}function s(t){l(o,n,r,i,s,"throw",t)}i(void 0)}))}}function f(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,a){if(!t)return;if("string"==typeof t)return p(t,a);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return p(t,a)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,n=new Array(a);e<a;e++)n[e]=t[e];return n}const m={name:"PosMain",data:function(){return{isOnline:navigator.onLine,settings:{tax_rate:0,payment_methods:["cash","card","wallet","bank_transfer"]},products:[],searchQuery:"",loading:!1,searchTimeout:null,selectedProduct:null,showVariationModal:!1,carts:[this.createEmptyCart()],currentCartIndex:0,selectedItemIndex:-1,showCustomerModal:!1,customerSearch:"",customers:[],newCustomer:{customer_name:"",phone1:""},showDiscountModal:!1,discountTarget:"sale",discountItemIndex:-1,discountForm:{type:"percentage",amount:0},showPaymentModal:!1,selectedPaymentMethod:"cash",paymentAmount:0,paymentReference:"",payments:[],showParkedModal:!1,parkedSales:[],showReceiptModal:!1,completedSale:null}},computed:{currentCart:function(){return this.carts[this.currentCartIndex]},parkedSalesCount:function(){return this.parkedSales.length},availablePaymentMethods:function(){var t=this;return[{value:"cash",label:"نقدي",icon:"fas fa-money-bill-wave"},{value:"card",label:"بطاقة",icon:"fas fa-credit-card"},{value:"wallet",label:"محفظة",icon:"fas fa-wallet"},{value:"bank_transfer",label:"تحويل بنكي",icon:"fas fa-university"}].filter((function(a){var e;return null===(e=t.settings.payment_methods)||void 0===e?void 0:e.includes(a.value)}))},totalPaid:function(){return this.payments.reduce((function(t,a){return t+a.amount}),0)},remainingAmount:function(){return Math.max(0,this.currentCart.total_amount-this.totalPaid)},changeAmount:function(){return this.totalPaid<=this.currentCart.total_amount?0:this.totalPaid-this.currentCart.total_amount},isFullyPaid:function(){return this.totalPaid>=this.currentCart.total_amount},canCompleteSale:function(){return this.payments.length>0&&this.totalPaid>=this.currentCart.total_amount},quickAmounts:function(){for(var t=this.remainingAmount>0?this.remainingAmount:this.currentCart.total_amount,a=[t],e=0,n=[5,10,20,50,100,200,500,1e3];e<n.length;e++){var r=n[e];r>t&&a.length<6&&a.push(r)}return f(new Set(a)).slice(0,6)}},methods:{createEmptyCart:function(){return{id:null,customer:null,items:[],subtotal:0,discount_type:null,discount_amount:0,discount_value:0,tax_rate:0,tax_amount:0,total_amount:0}},formatCurrency:function(t){return new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t||0)},initialize:function(){var t=this;return u(d().mark((function a(){var e,n;return d().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,r().get("/dashboard/api/pos/initialize");case 3:return e=a.sent,t.settings=e.data.data.settings,t.parkedSales=e.data.data.parked_sales||[],(n=e.data.data.draft_sales||[]).length>0&&(t.carts=n.map((function(a){return t.saleToCart(a)}))),a.next=10,t.fetchAllProducts();case 10:a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),console.error("Failed to initialize POS:",a.t0);case 15:case"end":return a.stop()}}),a,null,[[0,12]])})))()},saleToCart:function(t){return{id:t.id,customer:t.customer,items:t.items||[],subtotal:parseFloat(t.subtotal)||0,discount_type:t.discount_type,discount_amount:parseFloat(t.discount_amount)||0,discount_value:parseFloat(t.discount_value)||0,tax_rate:parseFloat(t.tax_rate)||0,tax_amount:parseFloat(t.tax_amount)||0,total_amount:parseFloat(t.total_amount)||0}},fetchAllProducts:function(){var t=this;return u(d().mark((function a(){var e;return d().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.loading=!0,a.prev=1,a.next=4,r().get("/dashboard/api/get-product-list",{params:{page:1}});case 4:e=a.sent,t.products=e.data.data||[],a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.error("Failed to fetch products:",a.t0);case 11:return a.prev=11,t.loading=!1,a.finish(11);case 14:case"end":return a.stop()}}),a,null,[[1,8,11,14]])})))()},searchProducts:function(){var t=this;return u(d().mark((function a(){return d().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(clearTimeout(t.searchTimeout),t.searchQuery&&!(t.searchQuery.length<1)){a.next=4;break}return t.fetchAllProducts(),a.abrupt("return");case 4:t.searchTimeout=setTimeout(u(d().mark((function a(){var e;return d().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.loading=!0,a.prev=1,a.next=4,r().get("/dashboard/api/get-product-list",{params:{search:t.searchQuery,page:1}});case 4:e=a.sent,t.products=e.data.data||[],a.next=12;break;case 8:a.prev=8,a.t0=a.catch(1),console.error("Search error:",a.t0),t.products=[];case 12:return a.prev=12,t.loading=!1,a.finish(12);case 15:case"end":return a.stop()}}),a,null,[[1,8,12,15]])}))),300);case 5:case"end":return a.stop()}}),a)})))()},handleSearchEnter:function(){1===this.products.length&&this.selectProduct(this.products[0])},clearSearch:function(){var t;this.searchQuery="",this.products=[],null===(t=this.$refs.searchInput)||void 0===t||t.focus()},selectProduct:function(t){var a=t.variation||t.variations||[];a&&a.length>0?(this.selectedProduct=s(s({},t),{},{variations:a}),this.showVariationModal=!0):this.addToCart(t,null)},addVariationToCart:function(t){var a;t.quantity<=0?null===(a=this.$toast)||void 0===a||a.warning("Out of stock"):(this.addToCart(this.selectedProduct,t),this.showVariationModal=!1,this.selectedProduct=null)},addToCart:function(t,a){var e=this;return u(d().mark((function n(){var r,o;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r={product_id:t.id,product_variation_id:(null==a?void 0:a.id)||null,product_name:t.name,variation_name:(null==a?void 0:a.var_name)||null,unit_price:(null==a?void 0:a.price)||t.sell_price,quantity:1},(o=e.currentCart.items.findIndex((function(t){return t.product_id===r.product_id&&t.product_variation_id===r.product_variation_id})))>=0?(e.currentCart.items[o].quantity++,e.updateItemTotal(o)):(r.line_total=r.unit_price*r.quantity,e.currentCart.items.push(r)),e.recalculateCart(),e.clearSearch(),!e.currentCart.id){n.next=8;break}return n.next=8,e.syncCartToBackend();case 8:case"end":return n.stop()}}),n)})))()},increaseQty:function(t){this.currentCart.items[t].quantity++,this.updateItemTotal(t),this.recalculateCart()},decreaseQty:function(t){this.currentCart.items[t].quantity>1&&(this.currentCart.items[t].quantity--,this.updateItemTotal(t),this.recalculateCart())},updateQty:function(t,a){var e=parseInt(a)||1;this.currentCart.items[t].quantity=Math.max(1,e),this.updateItemTotal(t),this.recalculateCart()},updateItemTotal:function(t){var a=this.currentCart.items[t],e=a.unit_price*a.quantity,n=0;"percentage"===a.discount_type?n=e*a.discount_amount/100:"fixed"===a.discount_type&&(n=a.discount_amount||0),a.discount_value=n,a.line_total=e-n},removeItem:function(t){this.currentCart.items.splice(t,1),this.selectedItemIndex=-1,this.recalculateCart()},selectItem:function(t){this.selectedItemIndex=this.selectedItemIndex===t?-1:t},recalculateCart:function(){var t=this.currentCart;t.subtotal=t.items.reduce((function(t,a){return t+a.line_total}),0),"percentage"===t.discount_type?t.discount_value=t.subtotal*t.discount_amount/100:"fixed"===t.discount_type?t.discount_value=t.discount_amount||0:t.discount_value=0;var a=t.subtotal-t.discount_value;t.tax_rate=this.settings.tax_rate||0,t.tax_amount=a*t.tax_rate/100,t.total_amount=a+t.tax_amount},newCart:function(){this.carts.push(this.createEmptyCart()),this.currentCartIndex=this.carts.length-1},switchCart:function(t){this.currentCartIndex=t,this.selectedItemIndex=-1},closeCart:function(t){this.carts.length<=1||(this.carts.splice(t,1),this.currentCartIndex>=this.carts.length&&(this.currentCartIndex=this.carts.length-1))},searchCustomers:function(){var t=this;return u(d().mark((function a(){var e;return d().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.customerSearch&&!(t.customerSearch.length<2)){a.next=3;break}return t.customers=[],a.abrupt("return");case 3:return a.prev=3,a.next=6,r().get("/dashboard/api/pos/customers",{params:{q:t.customerSearch}});case 6:e=a.sent,t.customers=e.data.data||[],a.next=13;break;case 10:a.prev=10,a.t0=a.catch(3),console.error("Customer search error:",a.t0);case 13:case"end":return a.stop()}}),a,null,[[3,10]])})))()},selectCustomer:function(t){this.currentCart.customer=t,this.showCustomerModal=!1,this.customerSearch="",this.customers=[]},createCustomer:function(){var t=this;return u(d().mark((function a(){var e,n,o;return d().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.newCustomer.customer_name&&t.newCustomer.phone1){a.next=3;break}return null===(e=t.$toast)||void 0===e||e.error("الاسم والهاتف مطلوبان"),a.abrupt("return");case 3:return a.prev=3,a.next=6,r().post("/dashboard/api/pos/customers",t.newCustomer);case 6:n=a.sent,t.selectCustomer(n.data.data),t.newCustomer={customer_name:"",phone1:""},a.next=14;break;case 11:a.prev=11,a.t0=a.catch(3),null===(o=t.$toast)||void 0===o||o.error("فشل إنشاء العميل");case 14:case"end":return a.stop()}}),a,null,[[3,11]])})))()},clearCustomer:function(){this.currentCart.customer=null},openItemDiscount:function(t){this.discountTarget="item",this.discountItemIndex=t;var a=this.currentCart.items[t];this.discountForm.type=a.discount_type||"percentage",this.discountForm.amount=a.discount_amount||0,this.showDiscountModal=!0},openSaleDiscount:function(){this.discountTarget="sale",this.discountForm.type=this.currentCart.discount_type||"percentage",this.discountForm.amount=this.currentCart.discount_amount||0,this.showDiscountModal=!0},applyDiscount:function(){if("item"===this.discountTarget){var t=this.currentCart.items[this.discountItemIndex];t.discount_type=this.discountForm.type,t.discount_amount=parseFloat(this.discountForm.amount)||0,this.updateItemTotal(this.discountItemIndex)}else this.currentCart.discount_type=this.discountForm.type,this.currentCart.discount_amount=parseFloat(this.discountForm.amount)||0;this.recalculateCart(),this.showDiscountModal=!1},clearDiscount:function(){if("item"===this.discountTarget){var t=this.currentCart.items[this.discountItemIndex];t.discount_type=null,t.discount_amount=0,this.updateItemTotal(this.discountItemIndex)}else this.currentCart.discount_type=null,this.currentCart.discount_amount=0;this.recalculateCart(),this.showDiscountModal=!1},openPayment:function(){var t=this;this.payments=[],this.selectedPaymentMethod="cash",this.paymentAmount=this.currentCart.total_amount,this.paymentReference="",this.showPaymentModal=!0,this.$nextTick((function(){var a;null===(a=t.$refs.paymentInput)||void 0===a||a.focus()}))},getMethodLabel:function(t){return{cash:"نقدي",card:"بطاقة",wallet:"محفظة",bank_transfer:"تحويل بنكي"}[t]||t},addPayment:function(){!this.paymentAmount||this.paymentAmount<=0||(this.payments.push({payment_method:this.selectedPaymentMethod,amount:this.paymentAmount,tendered_amount:"cash"===this.selectedPaymentMethod?this.paymentAmount:null,reference_number:this.paymentReference||null}),this.paymentAmount=Math.max(0,this.remainingAmount),this.paymentReference="")},removePayment:function(t){this.payments.splice(t,1)},completeSale:function(){var t=this;return u(d().mark((function a(){var e,n,o,i,s,c,l;return d().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.canCompleteSale){a.next=2;break}return a.abrupt("return");case 2:if(a.prev=2,e=t.currentCart.id){a.next=9;break}return a.next=7,r().post("/dashboard/api/pos/sales",{customer_id:null===(n=t.currentCart.customer)||void 0===n?void 0:n.id,items:t.currentCart.items});case 7:o=a.sent,e=o.data.data.id;case 9:if(!t.currentCart.discount_type){a.next=12;break}return a.next=12,r().put("/dashboard/api/pos/sales/".concat(e),{discount_type:t.currentCart.discount_type,discount_amount:t.currentCart.discount_amount});case 12:return a.next=14,r().post("/dashboard/api/pos/sales/".concat(e,"/complete"),{payments:t.payments});case 14:i=a.sent,t.completedSale=i.data.data,t.showPaymentModal=!1,t.showReceiptModal=!0,t.settings.print_receipt_auto&&t.printReceipt(),a.next=25;break;case 21:a.prev=21,a.t0=a.catch(2),console.error("Failed to complete sale:",a.t0),null===(s=t.$toast)||void 0===s||s.error((null===(c=a.t0.response)||void 0===c||null===(l=c.data)||void 0===l?void 0:l.message)||"فشل إتمام البيع");case 25:case"end":return a.stop()}}),a,null,[[2,21]])})))()},parkSale:function(){var t=this;return u(d().mark((function a(){var e,n,o,i,s;return d().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(0!==t.currentCart.items.length){a.next=2;break}return a.abrupt("return");case 2:if(a.prev=2,n=t.currentCart.id){a.next=9;break}return a.next=7,r().post("/dashboard/api/pos/sales",{customer_id:null===(o=t.currentCart.customer)||void 0===o?void 0:o.id,items:t.currentCart.items});case 7:i=a.sent,n=i.data.data.id;case 9:return a.next=11,r().post("/dashboard/api/pos/sales/".concat(n,"/park"),{park_name:"Cart ".concat(t.currentCartIndex+1)});case 11:return a.next=13,t.loadParkedSales();case 13:t.carts[t.currentCartIndex]=t.createEmptyCart(),null===(e=t.$toast)||void 0===e||e.success("تم تأجيل البيع"),a.next=21;break;case 17:a.prev=17,a.t0=a.catch(2),console.error("Failed to park sale:",a.t0),null===(s=t.$toast)||void 0===s||s.error("فشل تأجيل البيع");case 21:case"end":return a.stop()}}),a,null,[[2,17]])})))()},loadParkedSales:function(){var t=this;return u(d().mark((function a(){var e;return d().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,r().get("/dashboard/api/pos/sales/parked");case 3:e=a.sent,t.parkedSales=e.data.data||[],a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),console.error("Failed to load parked sales:",a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},showParkedSales:function(){this.loadParkedSales(),this.showParkedModal=!0},resumeSale:function(t){var a=this;return u(d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r().post("/dashboard/api/pos/sales/".concat(t.id,"/unpark"));case 3:return a.carts[a.currentCartIndex]=a.saleToCart(t),e.next=6,a.loadParkedSales();case 6:a.showParkedModal=!1,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("Failed to resume sale:",e.t0),null===(n=a.$toast)||void 0===n||n.error("فشل استعادة البيع");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()},deleteParkedSale:function(t){var a=this;return u(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(confirm("حذف هذا البيع المؤجل؟")){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,r().delete("/dashboard/api/pos/sales/".concat(t));case 5:return e.next=7,a.loadParkedSales();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Failed to delete parked sale:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))()},printReceipt:function(){var t=this;return u(d().mark((function a(){var e,n;return d().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.completedSale){a.next=2;break}return a.abrupt("return");case 2:return a.prev=2,a.next=5,r().get("/dashboard/api/pos/print/".concat(t.completedSale.id,"/html"),{responseType:"text"});case 5:e=a.sent,(n=window.open("","_blank")).document.write(e.data),n.document.close(),n.print(),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(2),console.error("Failed to print receipt:",a.t0);case 15:case"end":return a.stop()}}),a,null,[[2,12]])})))()},closeReceipt:function(){var t;this.showReceiptModal=!1,this.completedSale=null,this.carts[this.currentCartIndex]=this.createEmptyCart(),this.payments=[],null===(t=this.$refs.searchInput)||void 0===t||t.focus()},syncCartToBackend:function(){return u(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},handleKeydown:function(t){var a;if(["INPUT","TEXTAREA"].includes(t.target.tagName))"Escape"===t.key&&t.target.blur();else switch(t.key){case"F1":t.preventDefault(),null===(a=this.$refs.searchInput)||void 0===a||a.focus();break;case"F2":t.preventDefault(),this.newCart();break;case"F3":t.preventDefault(),this.switchCart((this.currentCartIndex+1)%this.carts.length);break;case"F4":t.preventDefault(),this.parkSale();break;case"F5":t.preventDefault(),this.showParkedSales();break;case"F8":t.preventDefault(),this.openSaleDiscount();break;case"F9":t.preventDefault(),this.showCustomerModal=!0;break;case"F10":t.preventDefault(),this.currentCart.items.length>0&&this.openPayment();break;case"F12":t.preventDefault(),this.showPaymentModal&&this.canCompleteSale?this.completeSale():this.currentCart.items.length>0&&(this.payments=[{payment_method:"cash",amount:this.currentCart.total_amount,tendered_amount:this.currentCart.total_amount}],this.completeSale());break;case"Delete":t.preventDefault(),this.selectedItemIndex>=0&&this.removeItem(this.selectedItemIndex);break;case"Escape":this.showVariationModal=!1,this.showCustomerModal=!1,this.showDiscountModal=!1,this.showPaymentModal=!1,this.showParkedModal=!1}}},mounted:function(){var t,a=this;this.initialize(),window.addEventListener("online",(function(){a.isOnline=!0})),window.addEventListener("offline",(function(){a.isOnline=!1})),null===(t=this.$refs.searchInput)||void 0===t||t.focus()},beforeDestroy:function(){window.removeEventListener("online",(function(){})),window.removeEventListener("offline",(function(){}))}};var v=e(3379),h=e.n(v),b=e(4216),x={insert:"head",singleton:!1};h()(b.Z,x);b.Z.locals;const g=(0,e(1900).Z)(m,(function(){var t,a,e,n,r=this,o=r._self._c;return o("div",{staticClass:"pos-container",on:{keydown:r.handleKeydown}},[r.isOnline?r._e():o("div",{staticClass:"offline-banner"},[o("i",{staticClass:"fas fa-wifi-slash"}),r._v(" وضع عدم الاتصال - سيتم مزامنة المبيعات عند الاتصال\n    ")]),r._v(" "),o("div",{staticClass:"pos-topbar"},[r._m(0),r._v(" "),o("div",{staticClass:"pos-topbar-center"},[o("div",{staticClass:"cart-tabs"},[r._l(r.carts,(function(t,a){return o("div",{key:t.id||a,staticClass:"cart-tab",class:{active:r.currentCartIndex===a},on:{click:function(t){return r.switchCart(a)}}},[o("span",[r._v("سلة "+r._s(a+1))]),r._v(" "),t.items.length?o("span",{staticClass:"item-count"},[r._v(r._s(t.items.length))]):r._e(),r._v(" "),r.carts.length>1?o("button",{staticClass:"close-cart",on:{click:function(t){return t.stopPropagation(),r.closeCart(a)}}},[o("i",{staticClass:"fas fa-times"})]):r._e()])})),r._v(" "),o("button",{staticClass:"new-cart-btn",attrs:{title:"سلة جديدة (F2)"},on:{click:r.newCart}},[o("i",{staticClass:"fas fa-plus"})])],2)]),r._v(" "),o("div",{staticClass:"pos-topbar-right"},[o("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{title:"المبيعات المؤجلة (F5)"},on:{click:r.showParkedSales}},[o("i",{staticClass:"fas fa-pause-circle"}),r._v(" "),r.parkedSalesCount>0?o("span",{staticClass:"badge"},[r._v(r._s(r.parkedSalesCount))]):r._e()]),r._v(" "),o("router-link",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{to:"/dashboard/pos/history"}},[o("i",{staticClass:"fas fa-history"})]),r._v(" "),o("router-link",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{to:"/dashboard/pos/settings"}},[o("i",{staticClass:"fas fa-cog"})])],1)]),r._v(" "),o("div",{staticClass:"pos-main"},[o("div",{staticClass:"pos-products"},[o("div",{staticClass:"search-section"},[o("div",{staticClass:"search-input-wrapper"},[o("i",{staticClass:"fas fa-search"}),r._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:r.searchQuery,expression:"searchQuery"}],ref:"searchInput",staticClass:"search-input",attrs:{type:"text",placeholder:"البحث عن المنتجات أو مسح الباركود (F1)"},domProps:{value:r.searchQuery},on:{input:[function(t){t.target.composing||(r.searchQuery=t.target.value)},r.searchProducts],keydown:function(t){return!t.type.indexOf("key")&&r._k(t.keyCode,"enter",13,t.key,"Enter")?null:r.handleSearchEnter.apply(null,arguments)}}}),r._v(" "),r.searchQuery?o("button",{staticClass:"clear-search",on:{click:r.clearSearch}},[o("i",{staticClass:"fas fa-times"})]):r._e()])]),r._v(" "),o("div",{staticClass:"product-grid"},[r.loading?o("div",{staticClass:"loading-state"},[o("i",{staticClass:"fas fa-spinner fa-spin"}),r._v(" جاري التحميل...\n                ")]):0===r.products.length&&r.searchQuery?o("div",{staticClass:"empty-state"},[o("i",{staticClass:"fas fa-search"}),r._v(" "),o("p",[r._v("لم يتم العثور على منتجات")])]):0===r.products.length?o("div",{staticClass:"empty-state"},[o("i",{staticClass:"fas fa-box-open"}),r._v(" "),o("p",[r._v("ابحث عن المنتجات أو امسح الباركود")])]):r._l(r.products,(function(t){return o("div",{key:t.id,staticClass:"product-card",on:{click:function(a){return r.selectProduct(t)}}},[o("div",{staticClass:"product-image"},[t.image?o("img",{attrs:{src:"/uploads/products/"+t.image,alt:t.name}}):o("i",{staticClass:"fas fa-box"})]),r._v(" "),o("div",{staticClass:"product-info"},[o("div",{staticClass:"product-name",attrs:{title:t.name}},[r._v(r._s(t.name))]),r._v(" "),o("div",{staticClass:"product-price"},[r._v(r._s(r.formatCurrency(t.sell_price)))]),r._v(" "),o("div",{staticClass:"product-stock",class:{"low-stock":t.total_stock<10}},[o("i",{staticClass:"fas fa-box"}),r._v(" "+r._s(t.total_stock)+"\n                        ")])])])}))],2)]),r._v(" "),o("div",{staticClass:"pos-cart"},[o("div",{staticClass:"customer-section"},[r.currentCart.customer?o("div",{staticClass:"selected-customer"},[o("i",{staticClass:"fas fa-user"}),r._v(" "),o("span",[r._v(r._s(r.currentCart.customer.customer_name))]),r._v(" "),o("button",{staticClass:"btn-clear",on:{click:r.clearCustomer}},[o("i",{staticClass:"fas fa-times"})])]):o("button",{staticClass:"select-customer-btn",on:{click:function(t){r.showCustomerModal=!0}}},[o("i",{staticClass:"fas fa-user-plus"}),r._v(" اختر عميل (F9)\n                ")])]),r._v(" "),o("div",{staticClass:"cart-items"},[0===r.currentCart.items.length?o("div",{staticClass:"empty-cart"},[o("i",{staticClass:"fas fa-shopping-cart"}),r._v(" "),o("p",[r._v("السلة فارغة")]),r._v(" "),o("small",[r._v("ابحث عن المنتجات لإضافتها")])]):r._l(r.currentCart.items,(function(t,a){return o("div",{key:t.id||a,staticClass:"cart-item",class:{selected:r.selectedItemIndex===a},on:{click:function(t){return r.selectItem(a)}}},[o("div",{staticClass:"item-info"},[o("div",{staticClass:"item-name"},[r._v("\n                            "+r._s(t.product_name)+"\n                            "),t.variation_name?o("span",{staticClass:"variation"},[r._v("("+r._s(t.variation_name)+")")]):r._e()]),r._v(" "),o("div",{staticClass:"item-price"},[r._v(r._s(r.formatCurrency(t.unit_price)))])]),r._v(" "),o("div",{staticClass:"item-controls"},[o("button",{staticClass:"qty-btn",on:{click:function(t){return t.stopPropagation(),r.decreaseQty(a)}}},[r._v("-")]),r._v(" "),o("input",{staticClass:"qty-input",attrs:{type:"number",min:"1"},domProps:{value:t.quantity},on:{change:function(t){return r.updateQty(a,t.target.value)},click:function(t){t.stopPropagation()}}}),r._v(" "),o("button",{staticClass:"qty-btn",on:{click:function(t){return t.stopPropagation(),r.increaseQty(a)}}},[r._v("+")])]),r._v(" "),o("div",{staticClass:"item-total"},[r._v(r._s(r.formatCurrency(t.line_total)))]),r._v(" "),o("div",{staticClass:"item-actions"},[o("button",{staticClass:"btn-discount",attrs:{title:"خصم"},on:{click:function(t){return t.stopPropagation(),r.openItemDiscount(a)}}},[o("i",{staticClass:"fas fa-percent"})]),r._v(" "),o("button",{staticClass:"btn-remove",attrs:{title:"حذف"},on:{click:function(t){return t.stopPropagation(),r.removeItem(a)}}},[o("i",{staticClass:"fas fa-trash"})])])])}))],2),r._v(" "),o("div",{staticClass:"cart-summary"},[o("div",{staticClass:"summary-row"},[o("span",[r._v("المجموع الفرعي")]),r._v(" "),o("span",[r._v(r._s(r.formatCurrency(r.currentCart.subtotal)))])]),r._v(" "),r.currentCart.discount_value>0?o("div",{staticClass:"summary-row discount"},[o("span",[r._v("\n                        الخصم\n                        "),o("button",{staticClass:"btn-edit-discount",on:{click:r.openSaleDiscount}},[o("i",{staticClass:"fas fa-edit"})])]),r._v(" "),o("span",[r._v("-"+r._s(r.formatCurrency(r.currentCart.discount_value)))])]):o("div",{staticClass:"summary-row"},[o("button",{staticClass:"add-discount-btn",on:{click:r.openSaleDiscount}},[o("i",{staticClass:"fas fa-percent"}),r._v(" إضافة خصم (F8)\n                    ")])]),r._v(" "),r.settings.tax_rate>0?o("div",{staticClass:"summary-row tax"},[o("span",[r._v("الضريبة ("+r._s(r.settings.tax_rate)+"%)")]),r._v(" "),o("span",[r._v(r._s(r.formatCurrency(r.currentCart.tax_amount)))])]):r._e(),r._v(" "),o("div",{staticClass:"summary-row total"},[o("span",[r._v("الإجمالي")]),r._v(" "),o("span",[r._v(r._s(r.formatCurrency(r.currentCart.total_amount)))])])]),r._v(" "),o("div",{staticClass:"cart-actions"},[o("button",{staticClass:"btn btn-secondary btn-park",attrs:{disabled:0===r.currentCart.items.length},on:{click:r.parkSale}},[o("i",{staticClass:"fas fa-pause"}),r._v(" تأجيل (F4)\n                ")]),r._v(" "),o("button",{staticClass:"btn btn-primary btn-pay",attrs:{disabled:0===r.currentCart.items.length},on:{click:r.openPayment}},[o("i",{staticClass:"fas fa-money-bill"}),r._v(" دفع (F10)\n                ")])])])]),r._v(" "),r.showVariationModal?o("div",{staticClass:"modal-overlay",on:{click:function(t){if(t.target!==t.currentTarget)return null;r.showVariationModal=!1}}},[o("div",{staticClass:"modal-content variation-modal"},[o("div",{staticClass:"modal-header"},[o("h5",[r._v("اختر النوع")]),r._v(" "),o("button",{staticClass:"close-btn",on:{click:function(t){r.showVariationModal=!1}}},[o("i",{staticClass:"fas fa-times"})])]),r._v(" "),o("div",{staticClass:"modal-body"},[o("div",{staticClass:"variations-grid"},r._l(r.selectedProduct.variations,(function(t){return o("div",{key:t.id,staticClass:"variation-card",class:{"out-of-stock":t.quantity<=0},on:{click:function(a){return r.addVariationToCart(t)}}},[o("div",{staticClass:"variation-name"},[r._v(r._s(t.var_name))]),r._v(" "),o("div",{staticClass:"variation-price"},[r._v(r._s(r.formatCurrency(t.price)))]),r._v(" "),o("div",{staticClass:"variation-stock"},[r._v("المخزون: "+r._s(t.quantity))])])})),0)])])]):r._e(),r._v(" "),r.showCustomerModal?o("div",{staticClass:"modal-overlay",on:{click:function(t){if(t.target!==t.currentTarget)return null;r.showCustomerModal=!1}}},[o("div",{staticClass:"modal-content customer-modal"},[o("div",{staticClass:"modal-header"},[o("h5",[r._v("اختر أو أنشئ عميل")]),r._v(" "),o("button",{staticClass:"close-btn",on:{click:function(t){r.showCustomerModal=!1}}},[o("i",{staticClass:"fas fa-times"})])]),r._v(" "),o("div",{staticClass:"modal-body"},[o("div",{staticClass:"customer-search"},[o("input",{directives:[{name:"model",rawName:"v-model",value:r.customerSearch,expression:"customerSearch"}],staticClass:"form-control",attrs:{type:"text",placeholder:"البحث بالاسم أو الهاتف..."},domProps:{value:r.customerSearch},on:{input:[function(t){t.target.composing||(r.customerSearch=t.target.value)},r.searchCustomers]}})]),r._v(" "),o("div",{staticClass:"customer-list"},r._l(r.customers,(function(t){return o("div",{key:t.id,staticClass:"customer-item",on:{click:function(a){return r.selectCustomer(t)}}},[o("div",{staticClass:"customer-name"},[r._v(r._s(t.customer_name))]),r._v(" "),o("div",{staticClass:"customer-phone"},[r._v(r._s(t.phone1))])])})),0),r._v(" "),!r.customers.length&&r.customerSearch?o("div",{staticClass:"create-customer-form"},[o("p",{staticClass:"text-muted"},[r._v("لم يتم العثور على عميل. إنشاء جديد؟")]),r._v(" "),o("div",{staticClass:"form-group"},[o("input",{directives:[{name:"model",rawName:"v-model",value:r.newCustomer.customer_name,expression:"newCustomer.customer_name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"اسم العميل"},domProps:{value:r.newCustomer.customer_name},on:{input:function(t){t.target.composing||r.$set(r.newCustomer,"customer_name",t.target.value)}}})]),r._v(" "),o("div",{staticClass:"form-group"},[o("input",{directives:[{name:"model",rawName:"v-model",value:r.newCustomer.phone1,expression:"newCustomer.phone1"}],staticClass:"form-control",attrs:{type:"text",placeholder:"رقم الهاتف"},domProps:{value:r.newCustomer.phone1},on:{input:function(t){t.target.composing||r.$set(r.newCustomer,"phone1",t.target.value)}}})]),r._v(" "),o("button",{staticClass:"btn btn-primary",on:{click:r.createCustomer}},[o("i",{staticClass:"fas fa-plus"}),r._v(" إنشاء عميل\n                    ")])]):r._e()])])]):r._e(),r._v(" "),r.showDiscountModal?o("div",{staticClass:"modal-overlay",on:{click:function(t){if(t.target!==t.currentTarget)return null;r.showDiscountModal=!1}}},[o("div",{staticClass:"modal-content discount-modal"},[o("div",{staticClass:"modal-header"},[o("h5",[r._v(r._s("sale"===r.discountTarget?"خصم البيع":"خصم الصنف"))]),r._v(" "),o("button",{staticClass:"close-btn",on:{click:function(t){r.showDiscountModal=!1}}},[o("i",{staticClass:"fas fa-times"})])]),r._v(" "),o("div",{staticClass:"modal-body"},[o("div",{staticClass:"discount-type-toggle"},[o("button",{class:{active:"percentage"===r.discountForm.type},on:{click:function(t){r.discountForm.type="percentage"}}},[o("i",{staticClass:"fas fa-percent"}),r._v(" نسبة مئوية\n                    ")]),r._v(" "),o("button",{class:{active:"fixed"===r.discountForm.type},on:{click:function(t){r.discountForm.type="fixed"}}},[o("i",{staticClass:"fas fa-dollar-sign"}),r._v(" مبلغ ثابت\n                    ")])]),r._v(" "),o("div",{staticClass:"discount-input"},[o("input",{directives:[{name:"model",rawName:"v-model",value:r.discountForm.amount,expression:"discountForm.amount"}],staticClass:"form-control",attrs:{type:"number",placeholder:"percentage"===r.discountForm.type?"أدخل النسبة %":"أدخل المبلغ",min:"0"},domProps:{value:r.discountForm.amount},on:{input:function(t){t.target.composing||r.$set(r.discountForm,"amount",t.target.value)}}})]),r._v(" "),o("div",{staticClass:"discount-actions"},[o("button",{staticClass:"btn btn-secondary",on:{click:r.clearDiscount}},[r._v("مسح")]),r._v(" "),o("button",{staticClass:"btn btn-primary",on:{click:r.applyDiscount}},[r._v("تطبيق")])])])])]):r._e(),r._v(" "),r.showPaymentModal?o("div",{staticClass:"modal-overlay",on:{click:function(t){if(t.target!==t.currentTarget)return null;r.showPaymentModal=!1}}},[o("div",{staticClass:"modal-content payment-modal"},[o("div",{staticClass:"modal-header"},[o("h5",[r._v("الدفع")]),r._v(" "),o("button",{staticClass:"close-btn",on:{click:function(t){r.showPaymentModal=!1}}},[o("i",{staticClass:"fas fa-times"})])]),r._v(" "),o("div",{staticClass:"modal-body"},[o("div",{staticClass:"payment-summary"},[o("div",{staticClass:"total-due"},[o("span",[r._v("الإجمالي المستحق")]),r._v(" "),o("span",{staticClass:"amount"},[r._v(r._s(r.formatCurrency(r.currentCart.total_amount)))])]),r._v(" "),r.payments.length>0?o("div",{staticClass:"paid-so-far"},[o("span",[r._v("المدفوع")]),r._v(" "),o("span",[r._v(r._s(r.formatCurrency(r.totalPaid)))])]):r._e(),r._v(" "),r.remainingAmount>0?o("div",{staticClass:"remaining"},[o("span",[r._v("المتبقي")]),r._v(" "),o("span",{staticClass:"amount"},[r._v(r._s(r.formatCurrency(r.remainingAmount)))])]):r._e(),r._v(" "),r.changeAmount>0?o("div",{staticClass:"change"},[o("span",[r._v("الباقي")]),r._v(" "),o("span",{staticClass:"amount text-success"},[r._v(r._s(r.formatCurrency(r.changeAmount)))])]):r._e()]),r._v(" "),o("div",{staticClass:"payment-methods"},r._l(r.availablePaymentMethods,(function(t){return o("button",{key:t.value,staticClass:"payment-method-btn",class:{active:r.selectedPaymentMethod===t.value},on:{click:function(a){r.selectedPaymentMethod=t.value}}},[o("i",{class:t.icon}),r._v(" "),o("span",[r._v(r._s(t.label))])])})),0),r._v(" "),o("div",{staticClass:"payment-input"},[o("label",[r._v("المبلغ")]),r._v(" "),o("input",{directives:[{name:"model",rawName:"v-model.number",value:r.paymentAmount,expression:"paymentAmount",modifiers:{number:!0}}],ref:"paymentInput",staticClass:"form-control amount-input",attrs:{type:"number",placeholder:r.remainingAmount},domProps:{value:r.paymentAmount},on:{input:function(t){t.target.composing||(r.paymentAmount=r._n(t.target.value))},blur:function(t){return r.$forceUpdate()}}})]),r._v(" "),"cash"===r.selectedPaymentMethod?o("div",{staticClass:"quick-amounts"},r._l(r.quickAmounts,(function(t){return o("button",{key:t,staticClass:"quick-amount-btn",on:{click:function(a){r.paymentAmount=t}}},[r._v("\n                        "+r._s(r.formatCurrency(t))+"\n                    ")])})),0):r._e(),r._v(" "),"cash"!==r.selectedPaymentMethod?o("div",{staticClass:"reference-input"},[o("label",[r._v("رقم المرجع (اختياري)")]),r._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:r.paymentReference,expression:"paymentReference"}],staticClass:"form-control",attrs:{type:"text",placeholder:"كود التفويض، رقم التحويل..."},domProps:{value:r.paymentReference},on:{input:function(t){t.target.composing||(r.paymentReference=t.target.value)}}})]):r._e(),r._v(" "),r.payments.length>0?o("div",{staticClass:"payments-list"},[o("h6",[r._v("المدفوعات")]),r._v(" "),r._l(r.payments,(function(t,a){return o("div",{key:a,staticClass:"payment-item"},[o("span",[r._v(r._s(r.getMethodLabel(t.payment_method)))]),r._v(" "),o("span",[r._v(r._s(r.formatCurrency(t.amount)))]),r._v(" "),o("button",{staticClass:"btn-remove-payment",on:{click:function(t){return r.removePayment(a)}}},[o("i",{staticClass:"fas fa-times"})])])}))],2):r._e(),r._v(" "),o("div",{staticClass:"payment-actions"},[r.isFullyPaid?r._e():o("button",{staticClass:"btn btn-secondary",attrs:{disabled:!r.paymentAmount||r.paymentAmount<=0},on:{click:r.addPayment}},[o("i",{staticClass:"fas fa-plus"}),r._v(" إضافة دفعة\n                    ")]),r._v(" "),o("button",{staticClass:"btn btn-primary btn-complete",attrs:{disabled:!r.canCompleteSale},on:{click:r.completeSale}},[o("i",{staticClass:"fas fa-check"}),r._v("\n                        "+r._s(r.isFullyPaid?"إتمام البيع (F12)":"إتمام بدفعات مقسمة")+"\n                    ")])])])])]):r._e(),r._v(" "),r.showParkedModal?o("div",{staticClass:"modal-overlay",on:{click:function(t){if(t.target!==t.currentTarget)return null;r.showParkedModal=!1}}},[o("div",{staticClass:"modal-content parked-modal"},[o("div",{staticClass:"modal-header"},[o("h5",[r._v("المبيعات المؤجلة")]),r._v(" "),o("button",{staticClass:"close-btn",on:{click:function(t){r.showParkedModal=!1}}},[o("i",{staticClass:"fas fa-times"})])]),r._v(" "),o("div",{staticClass:"modal-body"},[0===r.parkedSales.length?o("div",{staticClass:"empty-state"},[o("i",{staticClass:"fas fa-pause-circle"}),r._v(" "),o("p",[r._v("لا توجد مبيعات مؤجلة")])]):o("div",{staticClass:"parked-sales-list"},r._l(r.parkedSales,(function(t){return o("div",{key:t.id,staticClass:"parked-sale-item",on:{click:function(a){return r.resumeSale(t)}}},[o("div",{staticClass:"sale-info"},[o("div",{staticClass:"sale-number"},[r._v(r._s(t.sale_number))]),r._v(" "),t.park_name?o("div",{staticClass:"sale-name"},[r._v(r._s(t.park_name))]):r._e(),r._v(" "),t.customer?o("div",{staticClass:"sale-customer"},[o("i",{staticClass:"fas fa-user"}),r._v(" "+r._s(t.customer.customer_name)+"\n                            ")]):r._e()]),r._v(" "),o("div",{staticClass:"sale-details"},[o("div",{staticClass:"items-count"},[r._v(r._s(t.items.length)+" صنف")]),r._v(" "),o("div",{staticClass:"sale-total"},[r._v(r._s(r.formatCurrency(t.total_amount)))])]),r._v(" "),o("button",{staticClass:"btn-delete-parked",on:{click:function(a){return a.stopPropagation(),r.deleteParkedSale(t.id)}}},[o("i",{staticClass:"fas fa-trash"})])])})),0)])])]):r._e(),r._v(" "),r.showReceiptModal?o("div",{staticClass:"modal-overlay",on:{click:function(t){return t.target!==t.currentTarget?null:r.closeReceipt.apply(null,arguments)}}},[o("div",{staticClass:"modal-content receipt-modal"},[o("div",{staticClass:"modal-header"},[o("h5",[r._v("تم البيع بنجاح")]),r._v(" "),o("button",{staticClass:"close-btn",on:{click:r.closeReceipt}},[o("i",{staticClass:"fas fa-times"})])]),r._v(" "),o("div",{staticClass:"modal-body"},[r._m(1),r._v(" "),o("div",{staticClass:"receipt-info"},[o("p",[r._v("البيع #"+r._s(null===(t=r.completedSale)||void 0===t?void 0:t.sale_number))]),r._v(" "),o("p",{staticClass:"total"},[r._v(r._s(r.formatCurrency(null===(a=r.completedSale)||void 0===a?void 0:a.total_amount)))]),r._v(" "),(null===(e=r.completedSale)||void 0===e?void 0:e.change_amount)>0?o("p",{staticClass:"change"},[r._v("\n                        الباقي: "+r._s(r.formatCurrency(null===(n=r.completedSale)||void 0===n?void 0:n.change_amount))+"\n                    ")]):r._e()]),r._v(" "),o("div",{staticClass:"receipt-actions"},[o("button",{staticClass:"btn btn-secondary",on:{click:r.printReceipt}},[o("i",{staticClass:"fas fa-print"}),r._v(" طباعة الإيصال\n                    ")]),r._v(" "),o("button",{staticClass:"btn btn-primary",on:{click:r.closeReceipt}},[o("i",{staticClass:"fas fa-plus"}),r._v(" بيع جديد\n                    ")])])])])]):r._e()])}),[function(){var t=this._self._c;return t("div",{staticClass:"pos-topbar-left"},[t("h4",[t("i",{staticClass:"fas fa-cash-register"}),this._v(" نقطة البيع")])])},function(){var t=this._self._c;return t("div",{staticClass:"success-icon"},[t("i",{staticClass:"fas fa-check-circle"})])}],!1,null,"8baf0f80",null).exports}}]);